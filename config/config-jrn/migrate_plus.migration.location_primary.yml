uuid: 53adb724-12dc-4aa2-8eb7-7ad011d436d6
langcode: en
status: true
dependencies: {  }
id: location_primary
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - jrn
  - location
migration_group: jrn_location
label: 'JRN Location: Primary'
source:
  plugin: csv
  path: 'public://serranus_entity_csv_sample.txt'
  #serranus_entity_csv_20250702
  header_row_count: 1
  ids:
    - ENTITY_ID
  fields:
    -
      name: ENTITY_ID
      selector: ENTITY_ID
      label: Id
    -
      name: ENT_TYPE
      selector: ENT_TYPE
      label: 'Entity Type'
    -
      name: NAME1
      selector: NAME1
      label: Name1
    -
      name: NAME2
      selector: NAME2
      label: Name2
    -
      name: NAME3
      selector: NAME3
      label: Name3
process:
  uid:
    plugin: default_value
    default_value: 1
  title:
    plugin: concat
    source:
      - ENT_TYPE
      - NAME1
      - NAME2
      - NAME3
    delimiter: ', '
  field_entity_id: ENTITY_ID
  field_name_1: NAME1
  field_name2: NAME2
  field_name3: NAME3
  field_entity_type:
    -
      plugin: skip_on_empty
      method: process
      source: ENT_TYPE
    -
      plugin: entity_generate
      source: ENT_TYPE
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: entity_type
      value_key: name
      ignore_case: true
  pseudo_section:
    -
      plugin: migration_lookup
      migration: location_primary_section
      source: ENTITY_ID
    -
      plugin: null_as_array
  field_components:
    -
      plugin: sub_process
      source:
        - '@pseudo_section'
        #- '@pseudo_section'
      process:
        target_id:
          -
            plugin: skip_on_empty
            method: process
            message: 'Cannot import empty paragraph'
            source: '0'
        target_revision_id:
          -
            plugin: skip_on_empty
            method: process
            message: 'Cannot import empty paragraph'
            source: '1'
destination:
  plugin: 'entity:node'
  default_bundle: court_location
migration_dependencies: 
  optional:
    - location_primary_paragraph
    - location_primary_section
