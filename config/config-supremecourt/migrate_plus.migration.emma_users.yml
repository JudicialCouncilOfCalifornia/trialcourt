langcode: en
status: true
dependencies: {  }
id: emma_users
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - user
  - emma
migration_group: jcc2
label: 'User: Import from Emma'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: google_sheets
  urls: ''
  item_selector: entry
  fields:
    -
      name: src_unique_id
      label: 'Unique ID'
      selector: member_id
    -
      name: email
      label: Email
      selector: email
    -
      name: name
      label: Name
      selector: email
    -
      name: status
      label: Status
      selector: status_name
    -
      name: group
      label: 'User Group'
      selector: group
  ids:
    src_unique_id:
      type: string
process:
  name: name
  mail: email
#  pass: pw_hash
  status: status
field_jcc_messaging_center_group:
    -
      plugin: skip_on_empty
      source: group
      method: process
      message: 'No user group found.'
    -
      plugin: callback
      callable: trim
    -
      plugin: entity_generate
      bundle: user_group
      value_key: name
      bundle_key: vid
      entity_type: taxonomy_term
      ignore_case: true
destination:
  plugin: entity:user
  md5_passwords: true

# URL
# https://sheets.googleapis.com/v4/spreadsheets/1Vlri0t0H18RjZq0jrU4ppYSikevpsxWSh18EUA5ZC_E/values/users?alt=json&key=AIzaSyDOuGc8w_SBVYsYyxIUXAqBZZR0wnltAUs
# Drush : lando drush @local.supremecourt mim emma_users --debug
